export PATH=$ALTERAOCLSDKROOT/bin:$PATH
export AOCL_BOARD_PACKAGE_ROOT=/home/jsk_027/intelFPGA_pro/17.0/hld/board/s5_ref
export QUARTUS_ROOTDIR=/home/jsk_027/intelFPGA_pro/17.0/quartus/bin
export LD_LIBRARY_PATH=$ALTERAOCLSDKROOT/host/linux64/lib:$AOCL_BOARD_PACKAGE_ROOT/linux64/lib:$LD_LIBRARY_PATH
source $ALTERAOCLSDKROOT/init_opencl.sh

Install AOCL, QUartus, set the above environment variables and scripts.
Copy ALtera.icd from hld to /etc/OpenCL/vendors.
Create new dir /opt/Intel/OpenCL/Boards/s5_ref and copy board contents from hld/board.
Modify makefile to support Altera libs.
Shared var error - ld_lib_path

$ sudo apt-get update
$ sudo apt-get install ocl-icd-opencl-dev 
$ aocl install

aocl install: Running install from /home/jsk_027/intelFPGA_pro/17.0/hld/board/s5_ref/linux64/libexec
Using kernel source files from  /lib/modules/3.16.0-77-generic/build
make: Entering directory `/usr/src/linux-headers-3.16.0-77-generic'
  CC [M]  /tmp/opencl_driver_qYaIvW/aclpci_queue.o
  CC [M]  /tmp/opencl_driver_qYaIvW/aclpci.o
  CC [M]  /tmp/opencl_driver_qYaIvW/aclpci_fileio.o
  CC [M]  /tmp/opencl_driver_qYaIvW/aclpci_dma.o
  CC [M]  /tmp/opencl_driver_qYaIvW/aclpci_cvp.o
  CC [M]  /tmp/opencl_driver_qYaIvW/aclpci_cmd.o
  LD [M]  /tmp/opencl_driver_qYaIvW/aclpci_drv.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /tmp/opencl_driver_qYaIvW/aclpci_drv.mod.o
  LD [M]  /tmp/opencl_driver_qYaIvW/aclpci_drv.ko
make: Leaving directory `/usr/src/linux-headers-3.16.0-77-generic'
[sudo] password for jsk_027: 
Warning: 'mmdlib' is not defined in /home/jsk_027/intelFPGA_pro/17.0/hld/board/s5_ref/board_env.xml.
Unable to set up FCD. Please contact your board vendor or see section "Linking Your Host Application to the Khronos ICD Loader Library" of the Programming Guide for instructions on manual setup.


aocl install: Running install from /home/jsk_027/intelFPGA_pro/17.0/hld/board/a10_ref//linux64/libexec
/home/jsk_027/intelFPGA_pro/17.0/hld/board/a10_ref//linux64/libexec/install: 9: [: aclpci_a10_ref_drv: unexpected operator
Looking for kernel source files in /lib/modules/3.16.0-77-generic/build
Using kernel source files from  /lib/modules/3.16.0-77-generic/build
Building driver for BSP with name a10_ref
make: Entering directory `/usr/src/linux-headers-3.16.0-77-generic'
  CC [M]  /tmp/opencl_driver_ffQdf7/aclpci_queue.o
  CC [M]  /tmp/opencl_driver_ffQdf7/aclpci.o
  CC [M]  /tmp/opencl_driver_ffQdf7/aclpci_fileio.o
  CC [M]  /tmp/opencl_driver_ffQdf7/aclpci_dma.o
  CC [M]  /tmp/opencl_driver_ffQdf7/aclpci_pr.o
  CC [M]  /tmp/opencl_driver_ffQdf7/aclpci_cmd.o
  LD [M]  /tmp/opencl_driver_ffQdf7/aclpci_a10_ref_drv.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /tmp/opencl_driver_ffQdf7/aclpci_a10_ref_drv.mod.o
  LD [M]  /tmp/opencl_driver_ffQdf7/aclpci_a10_ref_drv.ko
make: Leaving directory `/usr/src/linux-headers-3.16.0-77-generic'
Couldn't open '/opt/Intel/OpenCL/Boards/a10_ref.fcd' for output
Unable to set up FCD. Please contact your board vendor or see section "Linking Your Host Application to the Khronos ICD Loader Library" of the Programming Guide for instructions on manual setup.

aocl diagnose
aocl diagnose: Running diagnose from /home/jsk_027/intelFPGA_pro/17.0/hld/board/a10_ref/linux64/libexec
aocl diagnose: failed 32 times. First error below:
Vendor: Intel(R) Corporation

Found no active device installed on the host machine.

Please make sure to: 
      1. Set the environment variable AOCL_BOARD_PACKAGE_ROOT to the correct board package.
      2. Install the driver from the selected board package.
      3. Properly install the device in the host machine.
      4. Configure the device with a supported OpenCL design.
      5. Reboot the machine if the PCI Express link failed.

DIAGNOSTIC_FAILED


